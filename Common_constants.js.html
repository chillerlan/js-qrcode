<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Common/constants.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Common/constants.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @created      24.07.2022
 * @author       smiley &lt;smiley@chillerlan.net>
 * @copyright    2022 smiley
 * @license      MIT
 *
 * @see https://jamie.build/const
 */

import PHPJS from './PHPJS.js';

/**
 * from EccLevel
 */

// ISO/IEC 18004:2000 Tables 12, 25
const ECC_L = 0b01; // 7%.
const ECC_M = 0b00; // 15%.
const ECC_Q = 0b11; // 25%.
const ECC_H = 0b10; // 30%.

/**
 * from MaskPattern
 */

/** @type {number|int} */
const MASK_PATTERN_AUTO = -1;

const PATTERN_000 = 0b000;
const PATTERN_001 = 0b001;
const PATTERN_010 = 0b010;
const PATTERN_011 = 0b011;
const PATTERN_100 = 0b100;
const PATTERN_101 = 0b101;
const PATTERN_110 = 0b110;
const PATTERN_111 = 0b111;

/**
 * @type {number[]|int[]}
 * @private
 */
const PATTERNS = [
	PATTERN_000,
	PATTERN_001,
	PATTERN_010,
	PATTERN_011,
	PATTERN_100,
	PATTERN_101,
	PATTERN_110,
	PATTERN_111,
];

/**
 * from Mode
 */

// ISO/IEC 18004:2000 Table 2
const MODE_NUMBER   = 0b0001;
const MODE_ALPHANUM = 0b0010;
const MODE_BYTE     = 0b0100;

const MODES = [
	MODE_NUMBER,
	MODE_ALPHANUM,
	MODE_BYTE,
];

/**
 * from Version
 */

/** @type {number|int} */
const VERSION_AUTO = -1;

/**
 * from QRMatrix
 */

/*
 * special values
 */

/** @type {number|int} */
const IS_DARK            = 0b100000000000;
/** @type {number|int} */
const M_NULL             = 0b000000000000;
/** @type {number|int} */
const M_LOGO             = 0b001000000000;
/** @type {number|int} */
const M_LOGO_DARK        = 0b101000000000;

/*
 * light values
 */

/** @type {number|int} */
const M_DATA             = 0b000000000010;
/** @type {number|int} */
const M_FINDER           = 0b000000000100;
/** @type {number|int} */
const M_SEPARATOR        = 0b000000001000;
/** @type {number|int} */
const M_ALIGNMENT        = 0b000000010000;
/** @type {number|int} */
const M_TIMING           = 0b000000100000;
/** @type {number|int} */
const M_FORMAT           = 0b000001000000;
/** @type {number|int} */
const M_VERSION          = 0b000010000000;
/** @type {number|int} */
const M_QUIETZONE        = 0b000100000000;

/*
 * dark values
 */

/** @type {number|int} */
const M_DARKMODULE       = 0b100000000001;
/** @type {number|int} */
const M_DATA_DARK        = 0b100000000010;
/** @type {number|int} */
const M_FINDER_DARK      = 0b100000000100;
/** @type {number|int} */
const M_ALIGNMENT_DARK   = 0b100000010000;
/** @type {number|int} */
const M_TIMING_DARK      = 0b100000100000;
/** @type {number|int} */
const M_FORMAT_DARK      = 0b100001000000;
/** @type {number|int} */
const M_VERSION_DARK     = 0b100010000000;
/** @type {number|int} */
const M_FINDER_DOT       = 0b110000000000;

/*
 * values used for reversed reflectance
 */

/** @type {number|int} */
const M_DARKMODULE_LIGHT = 0b000000000001;
/** @type {number|int} */
const M_FINDER_DOT_LIGHT = 0b010000000000;
/** @type {number|int} */
const M_SEPARATOR_DARK   = 0b100000001000;
/** @type {number|int} */
const M_QUIETZONE_DARK   = 0b100100000000;

/** @type {number[]|int[]} */
const MATRIX_NEIGHBOUR_FLAGS = [
	0b00000001,
	0b00000010,
	0b00000100,
	0b00001000,
	0b00010000,
	0b00100000,
	0b01000000,
	0b10000000,
];

/**
 * Map of flag => coord
 *
 * @see QRMatrix::checkNeighbours()
 *
 * @type {number[][]|int[][]}
 * @protected
 */
const MATRIX_NEIGHBOURS = PHPJS.array_combine(MATRIX_NEIGHBOUR_FLAGS, [
	[-1, -1],
	[ 0, -1],
	[ 1, -1],
	[ 1,  0],
	[ 1,  1],
	[ 0,  1],
	[-1,  1],
	[-1,  0],
]);

/**
 * @type {number[]|int[]}
 * @internal
 */
const MODULE_VALUES_KEYS = [
	// light
	M_NULL,
	M_DARKMODULE_LIGHT,
	M_DATA,
	M_FINDER,
	M_SEPARATOR,
	M_ALIGNMENT,
	M_TIMING,
	M_FORMAT,
	M_VERSION,
	M_QUIETZONE,
	M_LOGO,
	M_FINDER_DOT_LIGHT,
	// dark
	M_DARKMODULE,
	M_DATA_DARK,
	M_FINDER_DARK,
	M_SEPARATOR_DARK,
	M_ALIGNMENT_DARK,
	M_TIMING_DARK,
	M_FORMAT_DARK,
	M_VERSION_DARK,
	M_QUIETZONE_DARK,
	M_LOGO_DARK,
	M_FINDER_DOT,
];

const DEFAULT_MODULE_VALUES = PHPJS.array_combine(MODULE_VALUES_KEYS, [
	// light
	false,
	false,
	false,
	false,
	false,
	false,
	false,
	false,
	false,
	false,
	false,
	false,
	// dark
	true,
	true,
	true,
	true,
	true,
	true,
	true,
	true,
	true,
	true,
	true,
]);

const LAYERNAMES = PHPJS.array_combine(MODULE_VALUES_KEYS, [
	// light
	'null',
	'darkmodule-light',
	'data',
	'finder',
	'separator',
	'alignment',
	'timing',
	'format',
	'version',
	'quietzone',
	'logo',
	'finder-dot-light',
	// dark
	'darkmodule',
	'data-dark',
	'finder-dark',
	'separator-dark',
	'alignment-dark',
	'timing-dark',
	'format-dark',
	'version-dark',
	'quietzone-dark',
	'logo-dark',
	'finder-dot',
]);

export {
	ECC_L, ECC_M, ECC_Q, ECC_H,
	MASK_PATTERN_AUTO, PATTERNS, PATTERN_000, PATTERN_001, PATTERN_010,
	PATTERN_011, PATTERN_100, PATTERN_101, PATTERN_110, PATTERN_111,
	MODES, MODE_NUMBER, MODE_ALPHANUM, MODE_BYTE,
	VERSION_AUTO,
	M_NULL, M_DARKMODULE, M_DARKMODULE_LIGHT, M_DATA, M_FINDER, M_SEPARATOR, M_ALIGNMENT, M_TIMING,
	M_FORMAT, M_VERSION, M_QUIETZONE, M_LOGO, M_FINDER_DOT, M_FINDER_DOT_LIGHT, IS_DARK,
	M_DATA_DARK, M_FINDER_DARK, M_SEPARATOR_DARK, M_ALIGNMENT_DARK, M_TIMING_DARK,
	M_FORMAT_DARK, M_VERSION_DARK, M_QUIETZONE_DARK, M_LOGO_DARK,
	MATRIX_NEIGHBOUR_FLAGS, MATRIX_NEIGHBOURS,
	DEFAULT_MODULE_VALUES, LAYERNAMES,
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CHAR_TO_ORD">CHAR_TO_ORD</a></li><li><a href="global.html#ECC_L">ECC_L</a></li><li><a href="global.html#IS_DARK">IS_DARK</a></li><li><a href="global.html#MASK_PATTERN_AUTO">MASK_PATTERN_AUTO</a></li><li><a href="global.html#MATRIX_NEIGHBOURS">MATRIX_NEIGHBOURS</a></li><li><a href="global.html#MATRIX_NEIGHBOUR_FLAGS">MATRIX_NEIGHBOUR_FLAGS</a></li><li><a href="global.html#MODE_INTERFACES">MODE_INTERFACES</a></li><li><a href="global.html#MODE_LENGTH_BITS">MODE_LENGTH_BITS</a></li><li><a href="global.html#MODE_NUMBER">MODE_NUMBER</a></li><li><a href="global.html#MODULE_VALUES_KEYS">MODULE_VALUES_KEYS</a></li><li><a href="global.html#M_ALIGNMENT">M_ALIGNMENT</a></li><li><a href="global.html#M_ALIGNMENT_DARK">M_ALIGNMENT_DARK</a></li><li><a href="global.html#M_DARKMODULE">M_DARKMODULE</a></li><li><a href="global.html#M_DARKMODULE_LIGHT">M_DARKMODULE_LIGHT</a></li><li><a href="global.html#M_DATA">M_DATA</a></li><li><a href="global.html#M_DATA_DARK">M_DATA_DARK</a></li><li><a href="global.html#M_FINDER">M_FINDER</a></li><li><a href="global.html#M_FINDER_DARK">M_FINDER_DARK</a></li><li><a href="global.html#M_FINDER_DOT">M_FINDER_DOT</a></li><li><a href="global.html#M_FINDER_DOT_LIGHT">M_FINDER_DOT_LIGHT</a></li><li><a href="global.html#M_FORMAT">M_FORMAT</a></li><li><a href="global.html#M_FORMAT_DARK">M_FORMAT_DARK</a></li><li><a href="global.html#M_LOGO">M_LOGO</a></li><li><a href="global.html#M_LOGO_DARK">M_LOGO_DARK</a></li><li><a href="global.html#M_NULL">M_NULL</a></li><li><a href="global.html#M_QUIETZONE">M_QUIETZONE</a></li><li><a href="global.html#M_QUIETZONE_DARK">M_QUIETZONE_DARK</a></li><li><a href="global.html#M_SEPARATOR">M_SEPARATOR</a></li><li><a href="global.html#M_SEPARATOR_DARK">M_SEPARATOR_DARK</a></li><li><a href="global.html#M_TIMING">M_TIMING</a></li><li><a href="global.html#M_TIMING_DARK">M_TIMING_DARK</a></li><li><a href="global.html#M_VERSION">M_VERSION</a></li><li><a href="global.html#M_VERSION_DARK">M_VERSION_DARK</a></li><li><a href="global.html#TOTAL_CODEWORDS">TOTAL_CODEWORDS</a></li><li><a href="global.html#VERSION_AUTO">VERSION_AUTO</a></li><li><a href="global.html#_fromIterable">_fromIterable</a></li><li><a href="global.html#_set_canvasMimeType">_set_canvasMimeType</a></li><li><a href="global.html#_set_circleRadius">_set_circleRadius</a></li><li><a href="global.html#_set_eccLevel">_set_eccLevel</a></li><li><a href="global.html#_set_logoSpaceHeight">_set_logoSpaceHeight</a></li><li><a href="global.html#_set_logoSpaceStartX">_set_logoSpaceStartX</a></li><li><a href="global.html#_set_logoSpaceStartY">_set_logoSpaceStartY</a></li><li><a href="global.html#_set_logoSpaceWidth">_set_logoSpaceWidth</a></li><li><a href="global.html#_set_maskPattern">_set_maskPattern</a></li><li><a href="global.html#_set_quietzoneSize">_set_quietzoneSize</a></li><li><a href="global.html#_set_version">_set_version</a></li><li><a href="global.html#_set_versionMax">_set_versionMax</a></li><li><a href="global.html#_set_versionMin">_set_versionMin</a></li><li><a href="global.html#addAlphaNumSegment">addAlphaNumSegment</a></li><li><a href="global.html#addByteSegment">addByteSegment</a></li><li><a href="global.html#addMatrixModifications">addMatrixModifications</a></li><li><a href="global.html#addNumericSegment">addNumericSegment</a></li><li><a href="global.html#addSegment">addSegment</a></li><li><a href="global.html#ansi8">ansi8</a></li><li><a href="global.html#array_combine">array_combine</a></li><li><a href="global.html#array_fill">array_fill</a></li><li><a href="global.html#check">check</a></li><li><a href="global.html#checkNeighbours">checkNeighbours</a></li><li><a href="global.html#checkType">checkType</a></li><li><a href="global.html#checkTypeIn">checkTypeIn</a></li><li><a href="global.html#clampLogoSpaceValue">clampLogoSpaceValue</a></li><li><a href="global.html#clear">clear</a></li><li><a href="global.html#clearSegments">clearSegments</a></li><li><a href="global.html#clone">clone</a></li><li><a href="global.html#collectModules">collectModules</a></li><li><a href="global.html#createMarkup">createMarkup</a></li><li><a href="global.html#createMatrix">createMatrix</a></li><li><a href="global.html#drawImage">drawImage</a></li><li><a href="global.html#dump">dump</a></li><li><a href="global.html#exp">exp</a></li><li><a href="global.html#flip">flip</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getAlignmentPattern">getAlignmentPattern</a></li><li><a href="global.html#getBestPattern">getBestPattern</a></li><li><a href="global.html#getBuffer">getBuffer</a></li><li><a href="global.html#getCharCount">getCharCount</a></li><li><a href="global.html#getCoefficient">getCoefficient</a></li><li><a href="global.html#getCoefficients">getCoefficients</a></li><li><a href="global.html#getCssClass">getCssClass</a></li><li><a href="global.html#getDataMode">getDataMode</a></li><li><a href="global.html#getDefaultModuleValue">getDefaultModuleValue</a></li><li><a href="global.html#getDegree">getDegree</a></li><li><a href="global.html#getDimension">getDimension</a></li><li><a href="global.html#getEccLevel">getEccLevel</a></li><li><a href="global.html#getLength">getLength</a></li><li><a href="global.html#getLengthBitsForMode">getLengthBitsForMode</a></li><li><a href="global.html#getLengthBitsForVersion">getLengthBitsForVersion</a></li><li><a href="global.html#getLengthInBits">getLengthInBits</a></li><li><a href="global.html#getLevel">getLevel</a></li><li><a href="global.html#getMask">getMask</a></li><li><a href="global.html#getMaskPattern">getMaskPattern</a></li><li><a href="global.html#getMatrix">getMatrix</a></li><li><a href="global.html#getMaxBits">getMaxBits</a></li><li><a href="global.html#getMaxBitsForVersion">getMaxBitsForVersion</a></li><li><a href="global.html#getModuleValue">getModuleValue</a></li><li><a href="global.html#getModuleValueAt">getModuleValueAt</a></li><li><a href="global.html#getOrdinal">getOrdinal</a></li><li><a href="global.html#getOutputDimensions">getOutputDimensions</a></li><li><a href="global.html#getPattern">getPattern</a></li><li><a href="global.html#getQRMatrix">getQRMatrix</a></li><li><a href="global.html#getRSBlocks">getRSBlocks</a></li><li><a href="global.html#getSize">getSize</a></li><li><a href="global.html#getTotalCodewords">getTotalCodewords</a></li><li><a href="global.html#getVersion">getVersion</a></li><li><a href="global.html#getVersionNumber">getVersionNumber</a></li><li><a href="global.html#getVersionPattern">getVersionPattern</a></li><li><a href="global.html#getViewBox">getViewBox</a></li><li><a href="global.html#getformatPattern">getformatPattern</a></li><li><a href="global.html#header">header</a></li><li><a href="global.html#initFunctionalPatterns">initFunctionalPatterns</a></li><li><a href="global.html#initOutputInterface">initOutputInterface</a></li><li><a href="global.html#interleaveEcBytes">interleaveEcBytes</a></li><li><a href="global.html#intval">intval</a></li><li><a href="global.html#invert">invert</a></li><li><a href="global.html#isDark">isDark</a></li><li><a href="global.html#isZero">isZero</a></li><li><a href="global.html#isset">isset</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#mask">mask</a></li><li><a href="global.html#mod">mod</a></li><li><a href="global.html#module">module</a></li><li><a href="global.html#moduleValueIsValid">moduleValueIsValid</a></li><li><a href="global.html#multiply">multiply</a></li><li><a href="global.html#ord">ord</a></li><li><a href="global.html#path">path</a></li><li><a href="global.html#paths">paths</a></li><li><a href="global.html#prepareModuleValue">prepareModuleValue</a></li><li><a href="global.html#put">put</a></li><li><a href="global.html#putBit">putBit</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#renderMatrix">renderMatrix</a></li><li><a href="global.html#rotate90">rotate90</a></li><li><a href="global.html#row">row</a></li><li><a href="global.html#saveToFile">saveToFile</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#setAlignmentPattern">setAlignmentPattern</a></li><li><a href="global.html#setArea">setArea</a></li><li><a href="global.html#setDarkModule">setDarkModule</a></li><li><a href="global.html#setData">setData</a></li><li><a href="global.html#setFinderPattern">setFinderPattern</a></li><li><a href="global.html#setFormatInfo">setFormatInfo</a></li><li><a href="global.html#setLogoSpace">setLogoSpace</a></li><li><a href="global.html#setMatrixDimensions">setMatrixDimensions</a></li><li><a href="global.html#setMinMaxVersion">setMinMaxVersion</a></li><li><a href="global.html#setModuleValues">setModuleValues</a></li><li><a href="global.html#setOptions">setOptions</a></li><li><a href="global.html#setQuietZone">setQuietZone</a></li><li><a href="global.html#setSeparators">setSeparators</a></li><li><a href="global.html#setTimingPattern">setTimingPattern</a></li><li><a href="global.html#setVersionNumber">setVersionNumber</a></li><li><a href="global.html#testRule1">testRule1</a></li><li><a href="global.html#testRule2">testRule2</a></li><li><a href="global.html#testRule3">testRule3</a></li><li><a href="global.html#testRule4">testRule4</a></li><li><a href="global.html#toBase64DataURI">toBase64DataURI</a></li><li><a href="global.html#toString">toString</a></li><li><a href="global.html#validateString">validateString</a></li><li><a href="global.html#write">write</a></li><li><a href="global.html#writeCodewords">writeCodewords</a></li><li><a href="global.html#writeMatrix">writeMatrix</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Mon Jun 10 2024 22:21:38 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
